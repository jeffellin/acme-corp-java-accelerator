accelerator:
  displayName: Acme Java Web App
  description: A sample Spring Boot web application built with Tanzu supply-chain
  iconUrl: https://github.com/sample-accelerators/icons/raw/master/icon-boot.png
  tags:
  - java
  - spring
  - web
  - tanzu

  options:
  - name: name
    inputType: text
    label: Name of your Project
    required: true
  - name: description
    inputType: text
    label: description
  - name: repositoryPrefix
    inputType: text
    label: Prefix for the container image repository
    defaultValue: dev.local
    required: true
  - name: groupId
    inputType: select
    label: Acme Organization
    choices:
    - text: "ecommerce"
      value: com.acme.ecommerce
    - text: "manufacturing"
      value: com.acme.production
    - text: "sales"
      value: com.acme.sales
    required: true
  - name: mavenArtifactVersion
    inputType: text
    label: Maven Artifact Version
    defaultValue: 0.0.1-SNAPSHOT
    required: true
    description: The Artifact Version
  - name: javaVersion
    inputType: select
    label: Java version to use
    choices:
    - value: "1.8"
      text: Java 8
    - value: "11"
      text: Java 11
    - value: "17"
      text: Java 17
    defaultValue: "11"
    required: true
engine:
  merge:
  - include: [ "**/*" ]
    exclude: [ "pom.xml" , "src/**"]
  - include: [ src/* ]
    chain:
      type: RewritePath
      regex: src/main/java/com/example/demo
      rewriteTo: "'src/main/java/com/acme/'+'#artifactId"
  - include: [ "pom.xml" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: acme-java-web-app
        with: "#groupId"
      - text: acme-web-app-group
        with: "#artifactId"    
      - text: acme-web-app-version
        with: "#mavenArtifactVersion"
      - text: acme-name
        with: "#name"
      - text: acme-description
        with: "#description"
    - type: ReplaceText
      regex:
        pattern: "<java.version>.*<"
        with: "'<java.version>' + #javaVersion + '<'"